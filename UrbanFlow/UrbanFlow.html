<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UrbanFlow - Kilimani Smart Planning Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom animations and styles */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }
        
        .animate-fade-in-up {
            animation: fadeInUp 0.6s ease-out;
        }
        
        .animate-slide-in-right {
            animation: slideInRight 0.6s ease-out;
        }
        
        .animate-pulse-slow {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        /* Glassmorphism effect */
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Loading spinner */
        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 3px solid white;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Hover effects */
        .hover-lift {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .hover-lift:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        /* Custom scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        
        /* Screen transitions */
        .screen {
            transition: opacity 0.3s ease-in-out;
        }
        
        .screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        /* Button loading state */
        .btn-loading {
            position: relative;
            color: transparent;
        }
        
        .btn-loading::after {
            content: '';
            position: absolute;
            width: 16px;
            height: 16px;
            top: 50%;
            left: 50%;
            margin-left: -8px;
            margin-top: -8px;
            border: 2px solid transparent;
            border-top-color: currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1e40af',
                        secondary: '#059669',
                        accent: '#d97706',
                        dark: '#1f2937'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="w-10 h-10 bg-gradient-to-br from-primary to-secondary rounded-lg mr-3 flex items-center justify-center">
                        <span class="text-white font-bold text-lg">U</span>
                    </div>
                    <span class="text-2xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">UrbanFlow</span>
                </div>
                <div class="flex items-center space-x-1">
                    <div id="main-nav" class="flex items-center space-x-1">
                        <button onclick="showScreen('landing')" class="nav-btn px-4 py-2 rounded-lg text-sm font-medium transition-colors">Overview</button>
                        <button onclick="showScreen('map')" class="nav-btn px-4 py-2 rounded-lg text-sm font-medium transition-colors">Interactive Map</button>
                        <button onclick="showScreen('simulation')" class="nav-btn px-4 py-2 rounded-lg text-sm font-medium transition-colors">Design Sim</button>
                        <button onclick="showScreen('investor')" class="nav-btn px-4 py-2 rounded-lg text-sm font-medium transition-colors">Investor Hub</button>
                        <button onclick="showScreen('feedback')" class="nav-btn px-4 py-2 rounded-lg text-sm font-medium transition-colors">Citizen Voice</button>
                        <button onclick="showScreen('admin')" class="nav-btn px-4 py-2 rounded-lg text-sm font-medium transition-colors">Admin</button>
                    </div>
                    <div id="auth-nav" class="flex items-center space-x-1 hidden">
                        <button onclick="showScreen('login')" class="nav-btn px-4 py-2 rounded-lg text-sm font-medium transition-colors">Sign In</button>
                        <button onclick="showScreen('signup')" class="nav-btn px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium transition-colors hover:bg-blue-700">Sign Up</button>
                    </div>
                    <div class="ml-4 flex items-center space-x-2">
                        <button onclick="toggleTheme()" class="p-2 rounded-lg hover:bg-gray-100 transition-colors">
                            <span id="theme-icon">üåô</span>
                        </button>
                        <div id="user-menu" class="relative">
                            <button onclick="toggleUserMenu()" class="flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-colors">
                                <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center">
                                    <span class="text-white text-sm font-bold" id="user-avatar">JD</span>
                                </div>
                                <span class="text-sm font-medium text-gray-700" id="user-name">John Doe</span>
                                <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div id="user-dropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 hidden z-50">
                                <div class="py-2">
                                    <button onclick="showScreen('profile')" class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                        üë§ Profile Settings
                                    </button>
                                    <button onclick="showNotifications()" class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                        üîî Notifications
                                    </button>
                                    <button onclick="showHelp()" class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                        ‚ùì Help & Support
                                    </button>
                                    <hr class="my-2">
                                    <button onclick="handleLogout()" class="block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50">
                                        üö™ Sign Out
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Screen 1: Landing Page / Overview Dashboard -->
    <div id="landing-screen" class="screen">
        <!-- Hero Section -->
        <div class="bg-gradient-to-br from-primary via-blue-700 to-secondary text-white py-20">
            <div class="max-w-7xl mx-auto px-4 text-center">
                <h1 class="text-5xl lg:text-7xl font-bold mb-6">Transforming Kilimani through<br><span class="text-yellow-300">Sustainable Urban Intelligence</span></h1>
                <p class="text-xl lg:text-2xl mb-8 text-blue-100 max-w-4xl mx-auto">Data-driven solutions for walkable, green, and profitable urban development in Kenya's fastest-growing district</p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button onclick="showScreen('map')" class="bg-secondary hover:bg-green-600 text-white px-8 py-4 rounded-xl font-semibold text-lg transition-all transform hover:scale-105">Explore Urban Data</button>
                    <button onclick="showScreen('simulation')" class="bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white px-8 py-4 rounded-xl font-semibold text-lg transition-all">Simulate Design</button>
                </div>
            </div>
        </div>

        <!-- Key Metrics Dashboard -->
        <div class="max-w-7xl mx-auto px-4 py-16">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Kilimani at a Glance</h2>
                <p class="text-xl text-gray-600">Real-time insights driving sustainable development decisions</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16">
                <div class="bg-white rounded-2xl shadow-xl p-8 text-center hover:shadow-2xl transition-shadow">
                    <div class="w-16 h-16 bg-secondary/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-3xl">üåø</span>
                    </div>
                    <div class="text-4xl font-bold text-secondary mb-2">78%</div>
                    <div class="text-gray-600 font-medium">Residents Prefer Green Balconies</div>
                    <div class="text-sm text-gray-500 mt-2">+15% from last quarter</div>
                </div>

                <div class="bg-white rounded-2xl shadow-xl p-8 text-center hover:shadow-2xl transition-shadow">
                    <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-3xl">üì¢</span>
                    </div>
                    <div class="text-4xl font-bold text-red-600 mb-2">342</div>
                    <div class="text-gray-600 font-medium">Noise Complaints This Month</div>
                    <div class="text-sm text-gray-500 mt-2">Lenana Road: 67% of total</div>
                </div>

                <div class="bg-white rounded-2xl shadow-xl p-8 text-center hover:shadow-2xl transition-shadow">
                    <div class="w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-3xl">üö∂</span>
                    </div>
                    <div class="text-4xl font-bold text-primary mb-2">2.3m¬≤</div>
                    <div class="text-gray-600 font-medium">Green Space per 1000 Residents</div>
                    <div class="text-sm text-red-500 mt-2">Below WHO standard (9m¬≤)</div>
                </div>

                <div class="bg-white rounded-2xl shadow-xl p-8 text-center hover:shadow-2xl transition-shadow">
                    <div class="w-16 h-16 bg-accent/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-3xl">üöó</span>
                    </div>
                    <div class="text-4xl font-bold text-accent mb-2">156</div>
                    <div class="text-gray-600 font-medium">Traffic Congestion Points</div>
                    <div class="text-sm text-gray-500 mt-2">Peak hours: 7-9 AM, 5-7 PM</div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <h3 class="text-2xl font-bold text-gray-900 mb-6">Quick Actions</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <button onclick="showScreen('map')" class="bg-gradient-to-r from-primary to-blue-600 text-white p-6 rounded-xl hover:shadow-lg transition-all">
                        <div class="text-3xl mb-3">üó∫Ô∏è</div>
                        <div class="font-semibold">View Live Map</div>
                        <div class="text-sm opacity-90">Traffic, noise, green space overlays</div>
                    </button>
                    <button onclick="showScreen('simulation')" class="bg-gradient-to-r from-secondary to-green-600 text-white p-6 rounded-xl hover:shadow-lg transition-all">
                        <div class="text-3xl mb-3">üèóÔ∏è</div>
                        <div class="font-semibold">Design Simulator</div>
                        <div class="text-sm opacity-90">Test biophilic & elevated designs</div>
                    </button>
                    <button onclick="showScreen('investor')" class="bg-gradient-to-r from-accent to-yellow-600 text-white p-6 rounded-xl hover:shadow-lg transition-all">
                        <div class="text-3xl mb-3">üí∞</div>
                        <div class="font-semibold">ROI Calculator</div>
                        <div class="text-sm opacity-90">Investment insights & projections</div>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Screen 2: Interactive Map Page -->
    <div id="map-screen" class="screen hidden">
        <div class="max-w-7xl mx-auto px-4 py-8">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold text-gray-900">Interactive Kilimani Map</h2>
                <div class="flex items-center space-x-4">
                    <select class="px-4 py-2 border border-gray-300 rounded-lg">
                        <option>Current State</option>
                        <option>Proposed Development</option>
                        <option>5-Year Projection</option>
                    </select>
                    <button class="bg-primary text-white px-4 py-2 rounded-lg">Export Data</button>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                <!-- Map Filters Sidebar -->
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">Map Layers</h3>
                    <div class="space-y-3">
                        <label class="flex items-center">
                            <input type="checkbox" checked class="mr-3 text-primary">
                            <span class="text-sm">Traffic Density</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" checked class="mr-3 text-secondary">
                            <span class="text-sm">Green Spaces</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="mr-3 text-red-500">
                            <span class="text-sm">Noise Levels</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="mr-3 text-accent">
                            <span class="text-sm">Pedestrian Activity</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="mr-3 text-purple-500">
                            <span class="text-sm">Zoning</span>
                        </label>
                    </div>

                    <div class="mt-8">
                        <h4 class="font-semibold mb-3">Selected Area Info</h4>
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="text-sm text-gray-600 mb-2">Lenana Road Block 7</div>
                            <div class="space-y-2">
                                <div class="flex justify-between">
                                    <span class="text-xs">Foot Traffic:</span>
                                    <span class="text-xs font-medium text-primary">High</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-xs">Noise Level:</span>
                                    <span class="text-xs font-medium text-red-500">78 dB</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-xs">Green Coverage:</span>
                                    <span class="text-xs font-medium text-secondary">12%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6">
                        <h4 class="font-semibold mb-3">User Reports</h4>
                        <div class="space-y-2">
                            <div class="bg-red-50 border-l-4 border-red-400 p-2 rounded">
                                <div class="text-xs font-medium text-red-800">Uber Congestion</div>
                                <div class="text-xs text-red-600">Lenana Rd - 23 reports</div>
                            </div>
                            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-2 rounded">
                                <div class="text-xs font-medium text-yellow-800">Poor Walkability</div>
                                <div class="text-xs text-yellow-600">Ngong Rd - 18 reports</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Main Map Area -->
                <div class="lg:col-span-3 bg-white rounded-2xl shadow-lg p-6">
                    <div class="bg-gradient-to-br from-green-50 to-blue-50 rounded-xl h-96 relative overflow-hidden">
                        <!-- Kilimani Interactive Map -->
                        <div class="absolute inset-0 p-4">
                            <!-- Map Background with Streets -->
                            <div class="absolute inset-0 bg-gradient-to-br from-green-100 to-blue-100">
                                <!-- Street Lines -->
                                <div class="absolute top-1/3 left-0 right-0 h-1 bg-gray-400/50"></div>
                                <div class="absolute top-2/3 left-0 right-0 h-1 bg-gray-400/50"></div>
                                <div class="absolute left-1/4 top-0 bottom-0 w-1 bg-gray-400/50"></div>
                                <div class="absolute left-3/4 top-0 bottom-0 w-1 bg-gray-400/50"></div>
                                
                                <!-- Street Labels -->
                                <div class="absolute top-1/3 left-2 text-xs text-gray-600 bg-white/80 px-1 rounded">Lenana Rd</div>
                                <div class="absolute top-2/3 left-2 text-xs text-gray-600 bg-white/80 px-1 rounded">Ngong Rd</div>
                                <div class="absolute left-1/4 top-2 text-xs text-gray-600 bg-white/80 px-1 rounded transform -rotate-90">Argwings Kodhek</div>
                            </div>
                            
                            <!-- Interactive Buildings -->
                            <!-- Yaya Centre -->
                            <div class="absolute top-1/4 left-1/3 w-16 h-12 bg-blue-500/80 rounded-lg cursor-pointer hover:bg-blue-600/90 transition-all transform hover:scale-105 shadow-lg" onclick="showBuildingComments('Yaya Centre', 'yaya-centre')">
                                <div class="flex flex-col items-center justify-center h-full text-white">
                                    <span class="text-lg">üè¢</span>
                                    <span class="text-xs font-bold">Yaya</span>
                                </div>
                                <div class="absolute -top-2 -right-2 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center">
                                    <span class="text-white text-xs font-bold">12</span>
                                </div>
                            </div>
                            
                            <!-- Lenana Towers -->
                            <div class="absolute top-1/2 left-1/2 w-14 h-16 bg-purple-500/80 rounded-lg cursor-pointer hover:bg-purple-600/90 transition-all transform hover:scale-105 shadow-lg" onclick="showBuildingComments('Lenana Towers', 'lenana-towers')">
                                <div class="flex flex-col items-center justify-center h-full text-white">
                                    <span class="text-lg">üèóÔ∏è</span>
                                    <span class="text-xs font-bold">Lenana</span>
                                </div>
                                <div class="absolute -top-2 -right-2 w-5 h-5 bg-secondary rounded-full flex items-center justify-center">
                                    <span class="text-white text-xs font-bold">8</span>
                                </div>
                            </div>
                            
                            <!-- Ngong Road Plaza -->
                            <div class="absolute top-3/4 left-1/4 w-15 h-10 bg-accent/80 rounded-lg cursor-pointer hover:bg-accent/90 transition-all transform hover:scale-105 shadow-lg" onclick="showBuildingComments('Ngong Road Plaza', 'ngong-plaza')">
                                <div class="flex flex-col items-center justify-center h-full text-white">
                                    <span class="text-sm">üè¨</span>
                                    <span class="text-xs font-bold">Plaza</span>
                                </div>
                                <div class="absolute -top-2 -right-2 w-5 h-5 bg-yellow-500 rounded-full flex items-center justify-center">
                                    <span class="text-white text-xs font-bold">5</span>
                                </div>
                            </div>
                            
                            <!-- Green Apartments -->
                            <div class="absolute top-1/3 left-2/3 w-12 h-14 bg-secondary/80 rounded-lg cursor-pointer hover:bg-secondary/90 transition-all transform hover:scale-105 shadow-lg" onclick="showBuildingComments('Green Apartments', 'green-apartments')">
                                <div class="flex flex-col items-center justify-center h-full text-white">
                                    <span class="text-lg">üè†</span>
                                    <span class="text-xs font-bold">Green</span>
                                </div>
                                <div class="absolute -top-2 -right-2 w-5 h-5 bg-green-500 rounded-full flex items-center justify-center">
                                    <span class="text-white text-xs font-bold">15</span>
                                </div>
                            </div>
                            
                            <!-- Argwings Office Complex -->
                            <div class="absolute top-2/3 left-3/4 w-13 h-18 bg-gray-600/80 rounded-lg cursor-pointer hover:bg-gray-700/90 transition-all transform hover:scale-105 shadow-lg" onclick="showBuildingComments('Argwings Office Complex', 'argwings-office')">
                                <div class="flex flex-col items-center justify-center h-full text-white">
                                    <span class="text-lg">üè¢</span>
                                    <span class="text-xs font-bold">Office</span>
                                </div>
                                <div class="absolute -top-2 -right-2 w-5 h-5 bg-orange-500 rounded-full flex items-center justify-center">
                                    <span class="text-white text-xs font-bold">23</span>
                                </div>
                            </div>
                            
                            <!-- Kindaruma Heights (Under Construction) -->
                            <div class="absolute top-1/6 left-4/5 w-11 h-13 bg-pink-500/80 rounded-lg cursor-pointer hover:bg-pink-600/90 transition-all transform hover:scale-105 shadow-lg border-2 border-yellow-400 border-dashed" onclick="showBuildingComments('Kindaruma Heights', 'kindaruma-heights')">
                                <div class="flex flex-col items-center justify-center h-full text-white">
                                    <span class="text-sm">üèóÔ∏è</span>
                                    <span class="text-xs font-bold">New</span>
                                </div>
                                <div class="absolute -top-2 -right-2 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center">
                                    <span class="text-white text-xs font-bold">3</span>
                                </div>
                            </div>
                            
                            <!-- Traffic Indicators -->
                            <div class="absolute top-1/3 left-1/5 w-4 h-4 bg-red-500 rounded-full animate-pulse" title="High Traffic"></div>
                            <div class="absolute top-2/3 left-2/5 w-4 h-4 bg-red-500 rounded-full animate-pulse" title="High Traffic"></div>
                            
                            <!-- Green Spaces -->
                            <div class="absolute top-1/5 left-1/6 w-8 h-6 bg-green-400/60 rounded-full flex items-center justify-center">
                                <span class="text-sm">üå≥</span>
                            </div>
                            <div class="absolute bottom-1/5 right-1/6 w-10 h-8 bg-green-400/60 rounded-full flex items-center justify-center">
                                <span class="text-sm">üå≥</span>
                            </div>

                            <!-- Map Controls -->
                            <div class="absolute top-4 right-4 bg-white/90 backdrop-blur-sm rounded-lg shadow-lg p-3">
                                <div class="text-xs font-semibold mb-2">Click Buildings to Comment</div>
                                <div class="space-y-1">
                                    <div class="flex items-center">
                                        <div class="w-3 h-3 bg-blue-500 rounded mr-2"></div>
                                        <span class="text-xs">Commercial</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-3 h-3 bg-secondary rounded mr-2"></div>
                                        <span class="text-xs">Residential</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-3 h-3 bg-gray-600 rounded mr-2"></div>
                                        <span class="text-xs">Office</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-3 h-3 bg-pink-500 rounded mr-2 border border-yellow-400"></div>
                                        <span class="text-xs">Under Construction</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Citizen Reports -->
                            <div class="absolute bottom-20 left-8 bg-white rounded-full p-2 shadow-lg cursor-pointer hover:shadow-xl transition-shadow" onclick="showMapPopup('Citizen Report', 'Blocked sidewalk by parked vehicles near Yaya Centre')">
                                <span class="text-red-500">üìç</span>
                            </div>
                            <div class="absolute top-16 left-20 bg-white rounded-full p-2 shadow-lg cursor-pointer hover:shadow-xl transition-shadow" onclick="showMapPopup('Green Initiative', 'Proposed rooftop garden location for Lenana Towers')">
                                <span class="text-secondary">üìç</span>
                            </div>
                        </div>
                    </div>

                    <!-- Map Statistics -->
                    <div class="grid grid-cols-4 gap-4 mt-6">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-primary">8.2</div>
                            <div class="text-sm text-gray-600">Walkability Score</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-secondary">23%</div>
                            <div class="text-sm text-gray-600">Green Coverage</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-red-500">67dB</div>
                            <div class="text-sm text-gray-600">Avg Noise Level</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-accent">156</div>
                            <div class="text-sm text-gray-600">Congestion Points</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Screen 3: Design Simulation Page -->
    <div id="simulation-screen" class="screen hidden">
        <div class="max-w-7xl mx-auto px-4 py-8">
            <div class="text-center mb-8">
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Design Impact Simulator</h2>
                <p class="text-xl text-gray-600">Visualize the environmental and social impact of biophilic design decisions</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Design Controls -->
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="text-xl font-semibold mb-6">Design Features</h3>
                    
                    <div class="space-y-6">
                        <div>
                            <label class="flex items-center justify-between mb-3">
                                <span class="font-medium">Green Balconies</span>
                                <input type="checkbox" id="green-balconies" class="toggle-switch" onchange="updateSimulation()">
                            </label>
                            <div class="text-sm text-gray-600">Add vegetation to building facades</div>
                        </div>

                        <div>
                            <label class="flex items-center justify-between mb-3">
                                <span class="font-medium">Elevated Ground Floor</span>
                                <input type="checkbox" id="elevated-floor" class="toggle-switch" onchange="updateSimulation()">
                            </label>
                            <div class="text-sm text-gray-600">Create public space underneath buildings</div>
                        </div>

                        <div>
                            <label class="flex items-center justify-between mb-3">
                                <span class="font-medium">Rooftop Gardens</span>
                                <input type="checkbox" id="rooftop-gardens" class="toggle-switch" onchange="updateSimulation()">
                            </label>
                            <div class="text-sm text-gray-600">Green rooftops for carbon absorption</div>
                        </div>

                        <div>
                            <label class="flex items-center justify-between mb-3">
                                <span class="font-medium">Inter-building Bridges</span>
                                <input type="checkbox" id="bridges" class="toggle-switch" onchange="updateSimulation()">
                            </label>
                            <div class="text-sm text-gray-600">Connect buildings for better flow</div>
                        </div>

                        <div>
                            <label class="block font-medium mb-3">Building Height</label>
                            <input type="range" id="building-height" min="3" max="15" value="8" class="w-full" onchange="updateSimulation()">
                            <div class="flex justify-between text-sm text-gray-600">
                                <span>3 floors</span>
                                <span id="height-value">8 floors</span>
                                <span>15 floors</span>
                            </div>
                        </div>
                    </div>

                    <button onclick="resetSimulation()" class="w-full mt-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-colors">Reset to Default</button>
                </div>

                <!-- 3D Visualization -->
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="text-xl font-semibold mb-4">3D Building Preview</h3>
                    <div class="bg-gradient-to-b from-sky-200 to-green-100 rounded-xl h-80 relative overflow-hidden">
                        <!-- Simulated 3D Building -->
                        <div id="building-container" class="absolute inset-0 flex items-end justify-center p-8">
                            <div class="relative">
                                <!-- Building Base -->
                                <div id="building-base" class="w-24 bg-gray-300 rounded-b-lg transition-all duration-500" style="height: 120px;"></div>
                                <!-- Green Balconies -->
                                <div id="balconies" class="absolute inset-0 hidden">
                                    <div class="absolute left-0 top-4 w-2 h-16 bg-secondary rounded-r opacity-80"></div>
                                    <div class="absolute right-0 top-4 w-2 h-16 bg-secondary rounded-l opacity-80"></div>
                                    <div class="absolute left-0 top-12 w-2 h-16 bg-secondary rounded-r opacity-80"></div>
                                    <div class="absolute right-0 top-12 w-2 h-16 bg-secondary rounded-l opacity-80"></div>
                                </div>
                                <!-- Rooftop Garden -->
                                <div id="rooftop" class="absolute -top-2 left-0 right-0 h-2 bg-secondary rounded hidden"></div>
                                <!-- Elevated Ground -->
                                <div id="elevated-ground" class="absolute -bottom-4 left-2 right-2 h-4 bg-gray-100 rounded hidden"></div>
                            </div>
                        </div>
                        
                        <!-- Environment Elements -->
                        <div class="absolute bottom-4 left-4 text-2xl">üå≥</div>
                        <div class="absolute bottom-4 right-4 text-2xl">üå≥</div>
                        <div class="absolute top-4 left-8 text-2xl">‚òÄÔ∏è</div>
                        <div id="air-quality-indicator" class="absolute top-4 right-4 bg-white rounded-full p-2 shadow-lg">
                            <span class="text-sm">üí®</span>
                        </div>
                    </div>
                </div>

                <!-- Impact Metrics -->
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="text-xl font-semibold mb-6">Environmental Impact</h3>
                    
                    <div class="space-y-6">
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium">Air Quality Improvement</span>
                                <span id="air-quality" class="text-secondary font-bold">+0%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="air-quality-bar" class="bg-secondary h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                        </div>

                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium">Walkability Score</span>
                                <span id="walkability" class="text-primary font-bold">6.2/10</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="walkability-bar" class="bg-primary h-2 rounded-full transition-all duration-500" style="width: 62%"></div>
                            </div>
                        </div>

                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium">Carbon Footprint Reduction</span>
                                <span id="carbon" class="text-accent font-bold">-0%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="carbon-bar" class="bg-accent h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                        </div>

                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium">Noise Reduction</span>
                                <span id="noise" class="text-purple-600 font-bold">-0dB</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="noise-bar" class="bg-purple-600 h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-8 p-4 bg-green-50 rounded-lg">
                        <h4 class="font-semibold text-secondary mb-2">Emotional Impact</h4>
                        <p id="emotional-impact" class="text-sm text-gray-700">Standard urban design with minimal biophilic elements.</p>
                    </div>

                    <button onclick="generateReport()" class="w-full mt-6 bg-primary text-white py-3 rounded-lg hover:bg-blue-700 transition-colors">Generate Impact Report</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Screen 4: Investor Insights Page -->
    <div id="investor-screen" class="screen hidden">
        <div class="max-w-7xl mx-auto px-4 py-8">
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h2 class="text-4xl font-bold text-gray-900 mb-2">Investor Intelligence Hub</h2>
                    <p class="text-xl text-gray-600">Data-driven insights for profitable sustainable development</p>
                </div>
                <button onclick="generateInvestorReport()" class="bg-accent text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition-colors font-semibold">Generate Investment Report</button>
            </div>

            <!-- Key ROI Metrics -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-gradient-to-br from-secondary to-green-600 text-white rounded-2xl p-6">
                    <div class="text-3xl mb-2">üí∞</div>
                    <div class="text-3xl font-bold mb-1">$2.8M</div>
                    <div class="text-green-100">Projected ROI (5 years)</div>
                    <div class="text-sm text-green-200 mt-2">‚Üó 23% higher with green features</div>
                </div>
                <div class="bg-gradient-to-br from-primary to-blue-600 text-white rounded-2xl p-6">
                    <div class="text-3xl mb-2">‚è±Ô∏è</div>
                    <div class="text-3xl font-bold mb-1">14 months</div>
                    <div class="text-blue-100">Payback Period</div>
                    <div class="text-sm text-blue-200 mt-2">‚Üò 8 months faster than traditional</div>
                </div>
                <div class="bg-gradient-to-br from-accent to-yellow-600 text-white rounded-2xl p-6">
                    <div class="text-3xl mb-2">üìà</div>
                    <div class="text-3xl font-bold mb-1">94%</div>
                    <div class="text-yellow-100">Occupancy Rate</div>
                    <div class="text-sm text-yellow-200 mt-2">‚Üó Premium for sustainable spaces</div>
                </div>
                <div class="bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-2xl p-6">
                    <div class="text-3xl mb-2">üè•</div>
                    <div class="text-3xl font-bold mb-1">$450K</div>
                    <div class="text-purple-100">Healthcare Savings</div>
                    <div class="text-sm text-purple-200 mt-2">From improved air quality</div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Market Demand Analysis -->
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="text-xl font-semibold mb-6">Market Demand Analysis</h3>
                    <div class="space-y-6">
                        <div class="bg-green-50 border-l-4 border-secondary p-4 rounded">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-semibold text-gray-900">Green Spaces in Commercial Areas</span>
                                <span class="text-2xl font-bold text-secondary">78%</span>
                            </div>
                            <p class="text-sm text-gray-600">of Kilimani residents prefer malls and offices with integrated green spaces</p>
                        </div>
                        
                        <div class="bg-blue-50 border-l-4 border-primary p-4 rounded">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-semibold text-gray-900">Walkable Neighborhoods</span>
                                <span class="text-2xl font-bold text-primary">85%</span>
                            </div>
                            <p class="text-sm text-gray-600">willing to pay 15-20% premium for walkable, car-free environments</p>
                        </div>

                        <div class="bg-yellow-50 border-l-4 border-accent p-4 rounded">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-semibold text-gray-900">Mixed-Use Developments</span>
                                <span class="text-2xl font-bold text-accent">92%</span>
                            </div>
                            <p class="text-sm text-gray-600">of young professionals prefer live-work-play integrated spaces</p>
                        </div>
                    </div>

                    <!-- Chart Placeholder -->
                    <div class="mt-6">
                        <h4 class="font-semibold mb-3">Demand Trends (2020-2024)</h4>
                        <canvas id="demandChart" width="400" height="200"></canvas>
                    </div>
                </div>

                <!-- Investment Scenarios -->
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="text-xl font-semibold mb-6">Investment Scenarios</h3>
                    
                    <div class="space-y-4">
                        <div class="border border-gray-200 rounded-lg p-4 hover:border-primary transition-colors cursor-pointer" onclick="selectScenario('conservative')">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-semibold">Conservative Approach</span>
                                <span class="text-gray-600">$1.2M Investment</span>
                            </div>
                            <div class="text-sm text-gray-600 mb-3">Traditional design with minimal green features</div>
                            <div class="grid grid-cols-3 gap-4 text-center">
                                <div>
                                    <div class="text-lg font-bold text-gray-700">18%</div>
                                    <div class="text-xs text-gray-500">ROI</div>
                                </div>
                                <div>
                                    <div class="text-lg font-bold text-gray-700">22 mo</div>
                                    <div class="text-xs text-gray-500">Payback</div>
                                </div>
                                <div>
                                    <div class="text-lg font-bold text-gray-700">87%</div>
                                    <div class="text-xs text-gray-500">Occupancy</div>
                                </div>
                            </div>
                        </div>

                        <div class="border-2 border-secondary rounded-lg p-4 bg-green-50">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-semibold text-secondary">Recommended: Biophilic Design</span>
                                <span class="text-secondary font-bold">$1.8M Investment</span>
                            </div>
                            <div class="text-sm text-gray-600 mb-3">Green balconies, elevated ground floors, rooftop gardens</div>
                            <div class="grid grid-cols-3 gap-4 text-center">
                                <div>
                                    <div class="text-lg font-bold text-secondary">31%</div>
                                    <div class="text-xs text-gray-500">ROI</div>
                                </div>
                                <div>
                                    <div class="text-lg font-bold text-secondary">14 mo</div>
                                    <div class="text-xs text-gray-500">Payback</div>
                                </div>
                                <div>
                                    <div class="text-lg font-bold text-secondary">94%</div>
                                    <div class="text-xs text-gray-500">Occupancy</div>
                                </div>
                            </div>
                        </div>

                        <div class="border border-gray-200 rounded-lg p-4 hover:border-primary transition-colors cursor-pointer" onclick="selectScenario('premium')">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-semibold">Premium Sustainable</span>
                                <span class="text-gray-600">$2.5M Investment</span>
                            </div>
                            <div class="text-sm text-gray-600 mb-3">Full biophilic integration + smart building systems</div>
                            <div class="grid grid-cols-3 gap-4 text-center">
                                <div>
                                    <div class="text-lg font-bold text-gray-700">42%</div>
                                    <div class="text-xs text-gray-500">ROI</div>
                                </div>
                                <div>
                                    <div class="text-lg font-bold text-gray-700">16 mo</div>
                                    <div class="text-xs text-gray-500">Payback</div>
                                </div>
                                <div>
                                    <div class="text-lg font-bold text-gray-700">98%</div>
                                    <div class="text-xs text-gray-500">Occupancy</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                        <h4 class="font-semibold text-primary mb-2">üí° Investment Insight</h4>
                        <p class="text-sm text-gray-700">Properties with biophilic design elements command 15-25% higher rents and have 40% lower tenant turnover in Kilimani.</p>
                    </div>
                </div>
            </div>

            <!-- Profitability Calculator -->
            <div class="mt-8 bg-white rounded-2xl shadow-lg p-8">
                <h3 class="text-2xl font-semibold mb-6">Build Your Investment Proposal</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div>
                        <label class="block font-medium mb-2">Project Size (sq ft)</label>
                        <input type="range" id="project-size" min="5000" max="50000" value="15000" class="w-full mb-2" oninput="updateCalculator()">
                        <div class="text-sm text-gray-600"><span id="size-value">15,000</span> sq ft</div>
                    </div>
                    <div>
                        <label class="block font-medium mb-2">Green Features Level</label>
                        <select id="green-level" class="w-full p-2 border border-gray-300 rounded-lg" onchange="updateCalculator()">
                            <option value="basic">Basic (10% premium)</option>
                            <option value="standard" selected>Standard (25% premium)</option>
                            <option value="premium">Premium (40% premium)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block font-medium mb-2">Target Market</label>
                        <select id="target-market" class="w-full p-2 border border-gray-300 rounded-lg" onchange="updateCalculator()">
                            <option value="residential">Residential</option>
                            <option value="commercial" selected>Commercial</option>
                            <option value="mixed">Mixed-Use</option>
                        </select>
                    </div>
                </div>

                <div class="mt-8 grid grid-cols-1 md:grid-cols-4 gap-6 text-center">
                    <div class="bg-gray-50 rounded-lg p-4">
                        <div class="text-2xl font-bold text-gray-900" id="calc-investment">$1.8M</div>
                        <div class="text-sm text-gray-600">Total Investment</div>
                    </div>
                    <div class="bg-secondary/10 rounded-lg p-4">
                        <div class="text-2xl font-bold text-secondary" id="calc-roi">31%</div>
                        <div class="text-sm text-gray-600">5-Year ROI</div>
                    </div>
                    <div class="bg-primary/10 rounded-lg p-4">
                        <div class="text-2xl font-bold text-primary" id="calc-revenue">$2.4M</div>
                        <div class="text-sm text-gray-600">Annual Revenue</div>
                    </div>
                    <div class="bg-accent/10 rounded-lg p-4">
                        <div class="text-2xl font-bold text-accent" id="calc-savings">$320K</div>
                        <div class="text-sm text-gray-600">Operational Savings</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Screen 5: Citizen Feedback & Complaints -->
    <div id="feedback-screen" class="screen hidden">
        <div class="max-w-7xl mx-auto px-4 py-8">
            <div class="text-center mb-8">
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Citizen Voice Dashboard</h2>
                <p class="text-xl text-gray-600">Real-time community feedback driving urban planning decisions</p>
            </div>

            <!-- Summary Stats -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                    <div class="text-3xl mb-2">üìù</div>
                    <div class="text-3xl font-bold text-primary">1,247</div>
                    <div class="text-gray-600">Total Responses</div>
                    <div class="text-sm text-green-600 mt-1">‚Üó 34% this month</div>
                </div>
                <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                    <div class="text-3xl mb-2">üìç</div>
                    <div class="text-3xl font-bold text-red-500">89</div>
                    <div class="text-gray-600">Active Complaints</div>
                    <div class="text-sm text-red-500 mt-1">Requires attention</div>
                </div>
                <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                    <div class="text-3xl mb-2">‚úÖ</div>
                    <div class="text-3xl font-bold text-secondary">156</div>
                    <div class="text-gray-600">Issues Resolved</div>
                    <div class="text-sm text-green-600 mt-1">This quarter</div>
                </div>
                <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                    <div class="text-3xl mb-2">‚≠ê</div>
                    <div class="text-3xl font-bold text-accent">4.2</div>
                    <div class="text-gray-600">Satisfaction Score</div>
                    <div class="text-sm text-gray-500 mt-1">Out of 5.0</div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Interactive Building Map -->
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-semibold">Interactive Building Map</h3>
                        <div class="flex space-x-2">
                            <button onclick="toggleMapMode('view')" id="view-mode-btn" class="px-3 py-1 bg-primary text-white rounded-lg text-sm">View Comments</button>
                            <button onclick="toggleMapMode('add')" id="add-mode-btn" class="px-3 py-1 bg-gray-200 text-gray-700 rounded-lg text-sm">Add Comment</button>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-br from-blue-50 to-green-50 rounded-xl h-80 relative overflow-hidden">
                        <!-- Interactive Building Map -->
                        <div class="absolute inset-0 p-4">
                            <div class="grid grid-cols-6 gap-2 h-full">
                                <!-- Yaya Centre Area -->
                                <div class="bg-blue-400/70 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:bg-blue-500/80 transition-colors relative" onclick="showBuildingComments('Yaya Centre', 'yaya-centre')">
                                    <span class="text-white font-bold text-sm">üè¢</span>
                                    <span class="text-white text-xs">Yaya Centre</span>
                                    <div class="absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center">
                                        <span class="text-white text-xs font-bold">12</span>
                                    </div>
                                </div>
                                
                                <!-- Lenana Towers -->
                                <div class="bg-purple-400/70 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:bg-purple-500/80 transition-colors relative" onclick="showBuildingComments('Lenana Towers', 'lenana-towers')">
                                    <span class="text-white font-bold text-sm">üèóÔ∏è</span>
                                    <span class="text-white text-xs">Lenana Towers</span>
                                    <div class="absolute -top-1 -right-1 w-4 h-4 bg-secondary rounded-full flex items-center justify-center">
                                        <span class="text-white text-xs font-bold">8</span>
                                    </div>
                                </div>
                                
                                <!-- Ngong Road Plaza -->
                                <div class="bg-accent/70 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:bg-accent/80 transition-colors relative" onclick="showBuildingComments('Ngong Road Plaza', 'ngong-plaza')">
                                    <span class="text-white font-bold text-sm">üè¨</span>
                                    <span class="text-white text-xs">Ngong Plaza</span>
                                    <div class="absolute -top-1 -right-1 w-4 h-4 bg-yellow-500 rounded-full flex items-center justify-center">
                                        <span class="text-white text-xs font-bold">5</span>
                                    </div>
                                </div>
                                
                                <!-- Residential Complex -->
                                <div class="bg-secondary/60 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:bg-secondary/80 transition-colors relative" onclick="showBuildingComments('Green Apartments', 'green-apartments')">
                                    <span class="text-white font-bold text-sm">üè†</span>
                                    <span class="text-white text-xs">Green Apts</span>
                                    <div class="absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center">
                                        <span class="text-white text-xs font-bold">15</span>
                                    </div>
                                </div>
                                
                                <!-- Office Complex -->
                                <div class="bg-gray-500/70 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:bg-gray-600/80 transition-colors relative" onclick="showBuildingComments('Argwings Office Complex', 'argwings-office')">
                                    <span class="text-white font-bold text-sm">üè¢</span>
                                    <span class="text-white text-xs">Argwings</span>
                                    <div class="absolute -top-1 -right-1 w-4 h-4 bg-orange-500 rounded-full flex items-center justify-center">
                                        <span class="text-white text-xs font-bold">23</span>
                                    </div>
                                </div>
                                
                                <!-- New Development -->
                                <div class="bg-pink-400/70 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:bg-pink-500/80 transition-colors relative" onclick="showBuildingComments('Kindaruma Heights', 'kindaruma-heights')">
                                    <span class="text-white font-bold text-sm">üèóÔ∏è</span>
                                    <span class="text-white text-xs">Kindaruma</span>
                                    <div class="absolute -top-1 -right-1 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center">
                                        <span class="text-white text-xs font-bold">3</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Map Instructions -->
                        <div class="absolute top-4 left-4 bg-white/90 backdrop-blur-sm rounded-lg shadow-lg p-3 max-w-xs">
                            <div class="text-xs font-semibold mb-2">üí° How to Use</div>
                            <div class="text-xs text-gray-700">
                                <div class="mb-1">‚Ä¢ Click any building to view/add comments</div>
                                <div class="mb-1">‚Ä¢ Numbers show total comments</div>
                                <div>‚Ä¢ Help improve Kilimani with your feedback!</div>
                            </div>
                        </div>

                        <!-- Legend -->
                        <div class="absolute bottom-4 right-4 bg-white/90 backdrop-blur-sm rounded-lg shadow-lg p-3">
                            <div class="text-xs font-semibold mb-2">Building Types</div>
                            <div class="space-y-1">
                                <div class="flex items-center">
                                    <span class="text-sm mr-2">üè¢</span>
                                    <span class="text-xs">Commercial</span>
                                </div>
                                <div class="flex items-center">
                                    <span class="text-sm mr-2">üè†</span>
                                    <span class="text-xs">Residential</span>
                                </div>
                                <div class="flex items-center">
                                    <span class="text-sm mr-2">üèóÔ∏è</span>
                                    <span class="text-xs">Under Construction</span>
                                </div>
                                <div class="flex items-center">
                                    <span class="text-sm mr-2">üè¨</span>
                                    <span class="text-xs">Mixed Use</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-4 p-4 bg-blue-50 border-l-4 border-primary rounded">
                        <h4 class="font-semibold text-primary mb-2">üó£Ô∏è Your Voice Matters</h4>
                        <p class="text-sm text-gray-700">Click on any building to share your experience. Your feedback directly influences urban planning decisions and helps developers create better spaces for our community.</p>
                    </div>
                </div>

                <!-- Survey Results -->
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="text-xl font-semibold mb-4">Community Survey Results</h3>
                    
                    <div class="space-y-6">
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium">Want more green spaces in commercial areas</span>
                                <span class="text-secondary font-bold">78%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div class="bg-secondary h-3 rounded-full" style="width: 78%"></div>
                            </div>
                            <div class="text-xs text-gray-600 mt-1">1,247 responses</div>
                        </div>

                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium">Support elevated buildings for public space</span>
                                <span class="text-primary font-bold">68%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div class="bg-primary h-3 rounded-full" style="width: 68%"></div>
                            </div>
                            <div class="text-xs text-gray-600 mt-1">1,247 responses</div>
                        </div>

                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium">Prefer walkable neighborhoods</span>
                                <span class="text-accent font-bold">85%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div class="bg-accent h-3 rounded-full" style="width: 85%"></div>
                            </div>
                            <div class="text-xs text-gray-600 mt-1">1,247 responses</div>
                        </div>

                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium">Willing to pay premium for sustainable housing</span>
                                <span class="text-purple-600 font-bold">62%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div class="bg-purple-600 h-3 rounded-full" style="width: 62%"></div>
                            </div>
                            <div class="text-xs text-gray-600 mt-1">1,247 responses</div>
                        </div>
                    </div>

                    <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                        <h4 class="font-semibold text-primary mb-2">üìä Key Insight</h4>
                        <p class="text-sm text-gray-700">Strong community support for biophilic design and walkable infrastructure creates favorable conditions for sustainable development investments.</p>
                    </div>
                </div>
            </div>

            <!-- Recent Complaints -->
            <div class="mt-8 bg-white rounded-2xl shadow-lg p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-semibold">Recent Citizen Reports</h3>
                    <div class="flex space-x-2">
                        <button class="px-4 py-2 bg-primary text-white rounded-lg text-sm">All</button>
                        <button class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm">Traffic</button>
                        <button class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm">Noise</button>
                        <button class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm">Walkability</button>
                    </div>
                </div>

                <div class="space-y-4">
                    <div class="border border-gray-200 rounded-lg p-4 hover:border-primary transition-colors">
                        <div class="flex justify-between items-start mb-2">
                            <div class="flex items-center">
                                <span class="w-3 h-3 bg-red-500 rounded-full mr-3"></span>
                                <span class="font-medium">Blocked Sidewalk - Lenana Road</span>
                            </div>
                            <span class="text-sm text-gray-500">2 hours ago</span>
                        </div>
                        <p class="text-sm text-gray-700 mb-2">"Uber drivers consistently park on sidewalks near Yaya Centre, forcing pedestrians to walk on the road. Very dangerous, especially during rush hour."</p>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4">
                                <span class="text-xs text-gray-500">üìç Lenana Rd, Block 7</span>
                                <span class="text-xs text-gray-500">üë• 23 similar reports</span>
                            </div>
                            <button class="text-primary text-sm hover:underline">View Details</button>
                        </div>
                    </div>

                    <div class="border border-gray-200 rounded-lg p-4 hover:border-primary transition-colors">
                        <div class="flex justify-between items-start mb-2">
                            <div class="flex items-center">
                                <span class="w-3 h-3 bg-yellow-500 rounded-full mr-3"></span>
                                <span class="font-medium">Noise Pollution - Ngong Road</span>
                            </div>
                            <span class="text-sm text-gray-500">5 hours ago</span>
                        </div>
                        <p class="text-sm text-gray-700 mb-2">"Construction noise starts at 6 AM daily. No consideration for residential areas nearby. Need better noise regulations."</p>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4">
                                <span class="text-xs text-gray-500">üìç Ngong Rd, Junction</span>
                                <span class="text-xs text-gray-500">üë• 18 similar reports</span>
                            </div>
                            <button class="text-primary text-sm hover:underline">View Details</button>
                        </div>
                    </div>

                    <div class="border border-gray-200 rounded-lg p-4 hover:border-primary transition-colors">
                        <div class="flex justify-between items-start mb-2">
                            <div class="flex items-center">
                                <span class="w-3 h-3 bg-secondary rounded-full mr-3"></span>
                                <span class="font-medium">Positive Feedback - Arboretum Area</span>
                            </div>
                            <span class="text-sm text-gray-500">1 day ago</span>
                        </div>
                        <p class="text-sm text-gray-700 mb-2">"Love the new green spaces near the Arboretum! More developments should integrate nature like this. Makes the area so much more pleasant."</p>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4">
                                <span class="text-xs text-gray-500">üìç State House Rd</span>
                                <span class="text-xs text-gray-500">üëç 45 likes</span>
                            </div>
                            <button class="text-primary text-sm hover:underline">View Details</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Screen -->
    <div id="login-screen" class="screen hidden">
        <div class="min-h-screen bg-gradient-to-br from-primary via-blue-700 to-secondary flex items-center justify-center px-4">
            <div class="max-w-md w-full">
                <!-- Logo and Title -->
                <div class="text-center mb-8">
                    <div class="w-20 h-20 bg-white/20 backdrop-blur-sm rounded-2xl mx-auto mb-4 flex items-center justify-center">
                        <span class="text-white font-bold text-3xl">U</span>
                    </div>
                    <h1 class="text-4xl font-bold text-white mb-2">UrbanFlow</h1>
                    <p class="text-blue-100">Sustainable Urban Intelligence Platform</p>
                </div>

                <!-- Login Form -->
                <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-8 shadow-2xl border border-white/20">
                    <div class="mb-6">
                        <h2 class="text-2xl font-bold text-white mb-2">Welcome Back</h2>
                        <p class="text-blue-100">Sign in to access your urban planning dashboard</p>
                    </div>

                    <form onsubmit="handleLogin(event)" class="space-y-6">
                        <div>
                            <label class="block text-white font-medium mb-2">Email Address</label>
                            <input type="email" id="login-email" required 
                                   class="w-full px-4 py-3 bg-white/20 border border-white/30 rounded-xl text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-transparent transition-all"
                                   placeholder="planner@urbanflow.com">
                        </div>
                        
                        <div>
                            <label class="block text-white font-medium mb-2">Password</label>
                            <div class="relative">
                                <input type="password" id="login-password" required 
                                       class="w-full px-4 py-3 bg-white/20 border border-white/30 rounded-xl text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-transparent transition-all"
                                       placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                                <button type="button" onclick="togglePassword('login-password')" 
                                        class="absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white">
                                    üëÅÔ∏è
                                </button>
                            </div>
                        </div>

                        <div class="flex items-center justify-between">
                            <label class="flex items-center text-white">
                                <input type="checkbox" class="mr-2 rounded">
                                <span class="text-sm">Remember me</span>
                            </label>
                            <a href="#" class="text-sm text-blue-200 hover:text-white transition-colors">Forgot password?</a>
                        </div>

                        <button type="submit" id="login-btn"
                                class="w-full bg-white text-primary py-3 rounded-xl font-semibold hover:bg-blue-50 transition-all transform hover:scale-105 shadow-lg">
                            Sign In
                        </button>
                    </form>

                    <!-- Role Selection -->
                    <div class="mt-8 pt-6 border-t border-white/20">
                        <p class="text-white/80 text-sm mb-4">Quick Demo Access:</p>
                        <div class="grid grid-cols-1 gap-3">
                            <button onclick="demoLogin('planner')" 
                                    class="bg-secondary/80 text-white py-2 px-4 rounded-lg hover:bg-secondary transition-all text-sm">
                                üèóÔ∏è Urban Planner Demo
                            </button>
                            <button onclick="demoLogin('investor')" 
                                    class="bg-accent/80 text-white py-2 px-4 rounded-lg hover:bg-accent transition-all text-sm">
                                üí∞ Investor Demo
                            </button>
                            <button onclick="demoLogin('citizen')" 
                                    class="bg-purple-500/80 text-white py-2 px-4 rounded-lg hover:bg-purple-600 transition-all text-sm">
                                üë• Citizen Demo
                            </button>
                        </div>
                    </div>

                    <!-- Sign Up Link -->
                    <div class="mt-6 text-center">
                        <p class="text-white/80">Don't have an account? 
                            <button onclick="showScreen('signup')" class="text-blue-200 hover:text-white font-medium">Sign up</button>
                        </p>
                    </div>
                </div>

                <!-- Features Preview -->
                <div class="mt-8 grid grid-cols-3 gap-4 text-center">
                    <div class="text-white/80">
                        <div class="text-2xl mb-1">üó∫Ô∏è</div>
                        <div class="text-xs">Interactive Maps</div>
                    </div>
                    <div class="text-white/80">
                        <div class="text-2xl mb-1">üìä</div>
                        <div class="text-xs">Real-time Analytics</div>
                    </div>
                    <div class="text-white/80">
                        <div class="text-2xl mb-1">üå±</div>
                        <div class="text-xs">Sustainability Metrics</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sign Up Screen -->
    <div id="signup-screen" class="screen hidden">
        <div class="min-h-screen bg-gradient-to-br from-secondary via-green-700 to-primary flex items-center justify-center px-4">
            <div class="max-w-lg w-full">
                <!-- Logo and Title -->
                <div class="text-center mb-8">
                    <div class="w-20 h-20 bg-white/20 backdrop-blur-sm rounded-2xl mx-auto mb-4 flex items-center justify-center">
                        <span class="text-white font-bold text-3xl">U</span>
                    </div>
                    <h1 class="text-4xl font-bold text-white mb-2">Join UrbanFlow</h1>
                    <p class="text-green-100">Start building sustainable cities today</p>
                </div>

                <!-- Sign Up Form -->
                <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-8 shadow-2xl border border-white/20">
                    <form onsubmit="handleSignup(event)" class="space-y-6">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-white font-medium mb-2">First Name</label>
                                <input type="text" required 
                                       class="w-full px-4 py-3 bg-white/20 border border-white/30 rounded-xl text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-transparent transition-all"
                                       placeholder="John">
                            </div>
                            <div>
                                <label class="block text-white font-medium mb-2">Last Name</label>
                                <input type="text" required 
                                       class="w-full px-4 py-3 bg-white/20 border border-white/30 rounded-xl text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-transparent transition-all"
                                       placeholder="Doe">
                            </div>
                        </div>

                        <div>
                            <label class="block text-white font-medium mb-2">Email Address</label>
                            <input type="email" required 
                                   class="w-full px-4 py-3 bg-white/20 border border-white/30 rounded-xl text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-transparent transition-all"
                                   placeholder="john@example.com">
                        </div>

                        <div>
                            <label class="block text-white font-medium mb-2">Role</label>
                            <select required 
                                    class="w-full px-4 py-3 bg-white/20 border border-white/30 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-transparent transition-all">
                                <option value="" class="text-gray-900">Select your role</option>
                                <option value="planner" class="text-gray-900">Urban Planner</option>
                                <option value="architect" class="text-gray-900">Architect</option>
                                <option value="investor" class="text-gray-900">Investor</option>
                                <option value="developer" class="text-gray-900">Developer</option>
                                <option value="government" class="text-gray-900">Government Official</option>
                                <option value="citizen" class="text-gray-900">Citizen</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-white font-medium mb-2">Organization</label>
                            <input type="text" 
                                   class="w-full px-4 py-3 bg-white/20 border border-white/30 rounded-xl text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-transparent transition-all"
                                   placeholder="Your company or organization">
                        </div>

                        <div>
                            <label class="block text-white font-medium mb-2">Password</label>
                            <input type="password" id="signup-password" required 
                                   class="w-full px-4 py-3 bg-white/20 border border-white/30 rounded-xl text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-transparent transition-all"
                                   placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                        </div>

                        <div>
                            <label class="block text-white font-medium mb-2">Confirm Password</label>
                            <input type="password" required 
                                   class="w-full px-4 py-3 bg-white/20 border border-white/30 rounded-xl text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-transparent transition-all"
                                   placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                        </div>

                        <div class="flex items-start">
                            <input type="checkbox" required class="mt-1 mr-3">
                            <label class="text-white text-sm">
                                I agree to the <a href="#" class="text-green-200 hover:text-white underline">Terms of Service</a> 
                                and <a href="#" class="text-green-200 hover:text-white underline">Privacy Policy</a>
                            </label>
                        </div>

                        <button type="submit" id="signup-btn"
                                class="w-full bg-white text-secondary py-3 rounded-xl font-semibold hover:bg-green-50 transition-all transform hover:scale-105 shadow-lg">
                            Create Account
                        </button>
                    </form>

                    <!-- Sign In Link -->
                    <div class="mt-6 text-center">
                        <p class="text-white/80">Already have an account? 
                            <button onclick="showScreen('login')" class="text-green-200 hover:text-white font-medium">Sign in</button>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- User Profile/Settings Screen -->
    <div id="profile-screen" class="screen hidden">
        <div class="max-w-4xl mx-auto px-4 py-8">
            <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                <!-- Profile Header -->
                <div class="bg-gradient-to-r from-primary to-secondary px-8 py-12 text-white">
                    <div class="flex items-center space-x-6">
                        <div class="w-24 h-24 bg-white/20 rounded-full flex items-center justify-center">
                            <span class="text-3xl font-bold">JD</span>
                        </div>
                        <div>
                            <h1 class="text-3xl font-bold mb-2" id="profile-name">John Doe</h1>
                            <p class="text-blue-100 text-lg" id="profile-role">Senior Urban Planner</p>
                            <p class="text-blue-200" id="profile-org">Nairobi City Planning Department</p>
                        </div>
                    </div>
                </div>

                <!-- Profile Content -->
                <div class="p-8">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- Account Settings -->
                        <div class="lg:col-span-2">
                            <h2 class="text-2xl font-bold text-gray-900 mb-6">Account Settings</h2>
                            
                            <form class="space-y-6">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">First Name</label>
                                        <input type="text" value="John" 
                                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Last Name</label>
                                        <input type="text" value="Doe" 
                                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                    <input type="email" value="john.doe@nairobi.gov.ke" 
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Organization</label>
                                    <input type="text" value="Nairobi City Planning Department" 
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Bio</label>
                                    <textarea rows="4" 
                                              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
                                              placeholder="Tell us about your experience in urban planning..."></textarea>
                                </div>

                                <div class="flex space-x-4">
                                    <button type="submit" class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                                        Save Changes
                                    </button>
                                    <button type="button" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-300 transition-colors">
                                        Cancel
                                    </button>
                                </div>
                            </form>
                        </div>

                        <!-- Activity & Stats -->
                        <div>
                            <h3 class="text-xl font-bold text-gray-900 mb-6">Activity Overview</h3>
                            
                            <div class="space-y-4">
                                <div class="bg-primary/10 rounded-lg p-4">
                                    <div class="text-2xl font-bold text-primary">23</div>
                                    <div class="text-sm text-gray-600">Projects Reviewed</div>
                                </div>
                                
                                <div class="bg-secondary/10 rounded-lg p-4">
                                    <div class="text-2xl font-bold text-secondary">156</div>
                                    <div class="text-sm text-gray-600">Simulations Run</div>
                                </div>
                                
                                <div class="bg-accent/10 rounded-lg p-4">
                                    <div class="text-2xl font-bold text-accent">89</div>
                                    <div class="text-sm text-gray-600">Reports Generated</div>
                                </div>
                            </div>

                            <div class="mt-8">
                                <h4 class="font-semibold text-gray-900 mb-4">Recent Activity</h4>
                                <div class="space-y-3">
                                    <div class="text-sm">
                                        <div class="font-medium">Reviewed Kilimani Green Complex</div>
                                        <div class="text-gray-500">2 hours ago</div>
                                    </div>
                                    <div class="text-sm">
                                        <div class="font-medium">Generated ROI Report</div>
                                        <div class="text-gray-500">1 day ago</div>
                                    </div>
                                    <div class="text-sm">
                                        <div class="font-medium">Updated Zoning Recommendations</div>
                                        <div class="text-gray-500">3 days ago</div>
                                    </div>
                                </div>
                            </div>

                            <div class="mt-8">
                                <button onclick="handleLogout()" 
                                        class="w-full bg-red-500 text-white py-3 rounded-lg hover:bg-red-600 transition-colors">
                                    Sign Out
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Screen 6: Admin Dashboard -->
    <div id="admin-screen" class="screen hidden">
        <div class="max-w-7xl mx-auto px-4 py-8">
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h2 class="text-4xl font-bold text-gray-900 mb-2">Urban Planner Dashboard</h2>
                    <p class="text-xl text-gray-600">Comprehensive tools for sustainable city planning</p>
                </div>
                <div class="flex space-x-3">
                    <button class="bg-secondary text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors">Export Report</button>
                    <button class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">New Project</button>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="grid grid-cols-1 md:grid-cols-5 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-lg p-4 text-center">
                    <div class="text-2xl font-bold text-primary">12</div>
                    <div class="text-sm text-gray-600">Active Projects</div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-4 text-center">
                    <div class="text-2xl font-bold text-secondary">8.4</div>
                    <div class="text-sm text-gray-600">Avg Impact Score</div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-4 text-center">
                    <div class="text-2xl font-bold text-accent">89</div>
                    <div class="text-sm text-gray-600">Pending Reviews</div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-4 text-center">
                    <div class="text-2xl font-bold text-purple-600">156</div>
                    <div class="text-sm text-gray-600">Zoning Updates</div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-4 text-center">
                    <div class="text-2xl font-bold text-red-500">23</div>
                    <div class="text-sm text-gray-600">Urgent Issues</div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Project Management -->
                <div class="lg:col-span-2 bg-white rounded-2xl shadow-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold">Development Projects</h3>
                        <button onclick="uploadPlan()" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">Upload New Plan</button>
                    </div>

                    <div class="space-y-4">
                        <div class="border border-gray-200 rounded-lg p-4 hover:border-primary transition-colors">
                            <div class="flex justify-between items-start mb-3">
                                <div>
                                    <h4 class="font-semibold text-gray-900">Kilimani Green Complex</h4>
                                    <p class="text-sm text-gray-600">Mixed-use development with biophilic design</p>
                                </div>
                                <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium">Approved</span>
                            </div>
                            <div class="grid grid-cols-4 gap-4 mb-3">
                                <div class="text-center">
                                    <div class="text-lg font-bold text-secondary">9.2</div>
                                    <div class="text-xs text-gray-500">Impact Score</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-lg font-bold text-primary">85%</div>
                                    <div class="text-xs text-gray-500">Walkability</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-lg font-bold text-accent">-32%</div>
                                    <div class="text-xs text-gray-500">Carbon</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-lg font-bold text-purple-600">-8dB</div>
                                    <div class="text-xs text-gray-500">Noise</div>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-500">üìç Lenana Road, Block 12</span>
                                <div class="flex space-x-2">
                                    <button class="text-primary text-sm hover:underline">View Details</button>
                                    <button class="text-secondary text-sm hover:underline">Simulate</button>
                                </div>
                            </div>
                        </div>

                        <div class="border border-gray-200 rounded-lg p-4 hover:border-primary transition-colors">
                            <div class="flex justify-between items-start mb-3">
                                <div>
                                    <h4 class="font-semibold text-gray-900">Ngong Road Pedestrian Plaza</h4>
                                    <p class="text-sm text-gray-600">Car-free zone with elevated walkways</p>
                                </div>
                                <span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium">Under Review</span>
                            </div>
                            <div class="grid grid-cols-4 gap-4 mb-3">
                                <div class="text-center">
                                    <div class="text-lg font-bold text-secondary">8.7</div>
                                    <div class="text-xs text-gray-500">Impact Score</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-lg font-bold text-primary">92%</div>
                                    <div class="text-xs text-gray-500">Walkability</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-lg font-bold text-accent">-28%</div>
                                    <div class="text-xs text-gray-500">Carbon</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-lg font-bold text-purple-600">-12dB</div>
                                    <div class="text-xs text-gray-500">Noise</div>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-500">üìç Ngong Road Junction</span>
                                <div class="flex space-x-2">
                                    <button class="text-primary text-sm hover:underline">Review</button>
                                    <button class="text-secondary text-sm hover:underline">Simulate</button>
                                </div>
                            </div>
                        </div>

                        <div class="border border-red-200 rounded-lg p-4 bg-red-50">
                            <div class="flex justify-between items-start mb-3">
                                <div>
                                    <h4 class="font-semibold text-gray-900">Argwings Kodhek Tower</h4>
                                    <p class="text-sm text-gray-600">High-rise without green integration</p>
                                </div>
                                <span class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium">Needs Revision</span>
                            </div>
                            <div class="grid grid-cols-4 gap-4 mb-3">
                                <div class="text-center">
                                    <div class="text-lg font-bold text-red-500">4.2</div>
                                    <div class="text-xs text-gray-500">Impact Score</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-lg font-bold text-red-500">45%</div>
                                    <div class="text-xs text-gray-500">Walkability</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-lg font-bold text-red-500">+15%</div>
                                    <div class="text-xs text-gray-500">Carbon</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-lg font-bold text-red-500">+5dB</div>
                                    <div class="text-xs text-gray-500">Noise</div>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-500">üìç Argwings Kodhek Road</span>
                                <div class="flex space-x-2">
                                    <button class="text-red-600 text-sm hover:underline">Send Feedback</button>
                                    <button class="text-secondary text-sm hover:underline">Suggest Changes</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tools & Analytics -->
                <div class="space-y-6">
                    <!-- Impact Assessment Tool -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-lg font-semibold mb-4">Impact Assessment</h3>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm font-medium">Air Quality Improvement</span>
                                    <span class="text-secondary font-bold">+24%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-secondary h-2 rounded-full" style="width: 75%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm font-medium">Traffic Reduction</span>
                                    <span class="text-primary font-bold">-18%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-primary h-2 rounded-full" style="width: 60%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm font-medium">Green Space Coverage</span>
                                    <span class="text-accent font-bold">+35%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-accent h-2 rounded-full" style="width: 85%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Zoning Recommendations -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-lg font-semibold mb-4">Zoning Recommendations</h3>
                        <div class="space-y-3">
                            <div class="bg-green-50 border-l-4 border-secondary p-3 rounded">
                                <div class="text-sm font-medium text-green-800">Increase Mixed-Use Zones</div>
                                <div class="text-xs text-green-600">Lenana Road corridor</div>
                            </div>
                            <div class="bg-blue-50 border-l-4 border-primary p-3 rounded">
                                <div class="text-sm font-medium text-blue-800">Pedestrian Priority Areas</div>
                                <div class="text-xs text-blue-600">Ngong Road junction</div>
                            </div>
                            <div class="bg-yellow-50 border-l-4 border-accent p-3 rounded">
                                <div class="text-sm font-medium text-yellow-800">Green Building Requirements</div>
                                <div class="text-xs text-yellow-600">All new developments</div>
                            </div>
                        </div>
                        <button onclick="exportZoning()" class="w-full mt-4 bg-primary text-white py-2 rounded-lg hover:bg-blue-700 transition-colors">Export Zoning Plan</button>
                    </div>

                    <!-- Quick Actions -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-lg font-semibold mb-4">Quick Actions</h3>
                        <div class="space-y-3">
                            <button onclick="runSimulation()" class="w-full bg-secondary text-white py-3 rounded-lg hover:bg-green-600 transition-colors text-sm">Run Traffic Simulation</button>
                            <button onclick="generateReport()" class="w-full bg-primary text-white py-3 rounded-lg hover:bg-blue-700 transition-colors text-sm">Generate Impact Report</button>
                            <button onclick="reviewComplaints()" class="w-full bg-accent text-white py-3 rounded-lg hover:bg-yellow-600 transition-colors text-sm">Review Citizen Feedback</button>
                            <button onclick="updateZoning()" class="w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition-colors text-sm">Update Zoning Maps</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Map Popup -->
    <div id="map-popup" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-6 max-w-md mx-4">
            <h3 id="popup-title" class="text-lg font-semibold mb-2"></h3>
            <p id="popup-content" class="text-gray-600 mb-4"></p>
            <button onclick="closeMapPopup()" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">Close</button>
        </div>
    </div>

    <!-- Building Comments Modal -->
    <div id="building-comments-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden">
            <!-- Modal Header -->
            <div class="bg-gradient-to-r from-primary to-secondary text-white p-6">
                <div class="flex justify-between items-center">
                    <div>
                        <h3 id="building-name" class="text-2xl font-bold mb-1">Building Name</h3>
                        <p id="building-type" class="text-blue-100">Building Type</p>
                    </div>
                    <button onclick="closeBuildingComments()" class="text-white hover:text-blue-200 transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="flex h-96">
                <!-- Comments List -->
                <div class="flex-1 p-6 overflow-y-auto custom-scrollbar">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="text-lg font-semibold">Community Feedback</h4>
                        <div class="flex items-center space-x-2">
                            <select id="comment-filter" class="px-3 py-1 border border-gray-300 rounded-lg text-sm" onchange="filterComments()">
                                <option value="all">All Comments</option>
                                <option value="positive">Positive</option>
                                <option value="negative">Issues</option>
                                <option value="suggestions">Suggestions</option>
                            </select>
                            <span id="comment-count" class="text-sm text-gray-500">12 comments</span>
                        </div>
                    </div>

                    <div id="comments-list" class="space-y-4">
                        <!-- Comments will be populated here -->
                    </div>
                </div>

                <!-- Add Comment Form -->
                <div class="w-80 bg-gray-50 p-6 border-l border-gray-200">
                    <h4 class="text-lg font-semibold mb-4">Share Your Experience</h4>
                    
                    <form onsubmit="submitComment(event)" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Comment Type</label>
                            <select id="comment-type" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                <option value="">Select type...</option>
                                <option value="positive">üëç Positive Feedback</option>
                                <option value="negative">‚ö†Ô∏è Issue/Problem</option>
                                <option value="suggestion">üí° Suggestion</option>
                                <option value="accessibility">‚ôø Accessibility</option>
                                <option value="environment">üå± Environmental</option>
                                <option value="safety">üõ°Ô∏è Safety Concern</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Your Comment</label>
                            <textarea id="comment-text" required rows="4" 
                                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent resize-none"
                                      placeholder="Share your thoughts about this building..."></textarea>
                            <div class="text-xs text-gray-500 mt-1">
                                <span id="char-count">0</span>/500 characters
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Rating (Optional)</label>
                            <div class="flex space-x-1" id="rating-stars">
                                <button type="button" onclick="setRating(1)" class="star text-2xl text-gray-300 hover:text-yellow-400 transition-colors">‚≠ê</button>
                                <button type="button" onclick="setRating(2)" class="star text-2xl text-gray-300 hover:text-yellow-400 transition-colors">‚≠ê</button>
                                <button type="button" onclick="setRating(3)" class="star text-2xl text-gray-300 hover:text-yellow-400 transition-colors">‚≠ê</button>
                                <button type="button" onclick="setRating(4)" class="star text-2xl text-gray-300 hover:text-yellow-400 transition-colors">‚≠ê</button>
                                <button type="button" onclick="setRating(5)" class="star text-2xl text-gray-300 hover:text-yellow-400 transition-colors">‚≠ê</button>
                            </div>
                            <input type="hidden" id="rating-value" value="0">
                        </div>

                        <div class="flex items-start">
                            <input type="checkbox" id="anonymous" class="mt-1 mr-2">
                            <label for="anonymous" class="text-sm text-gray-700">Post anonymously</label>
                        </div>

                        <button type="submit" class="w-full bg-primary text-white py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium">
                            Submit Comment
                        </button>
                    </form>

                    <div class="mt-6 p-3 bg-blue-50 rounded-lg">
                        <div class="text-xs font-semibold text-primary mb-1">üí° Your Impact</div>
                        <div class="text-xs text-gray-600">Your feedback helps:</div>
                        <ul class="text-xs text-gray-600 mt-1 space-y-1">
                            <li>‚Ä¢ Developers improve designs</li>
                            <li>‚Ä¢ Government make policy changes</li>
                            <li>‚Ä¢ Community understand issues</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let isDarkMode = false;
        let currentScreen = 'landing';

        // Navigation
        function showScreen(screenName) {
            // Hide all screens
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.add('hidden');
            });
            
            // Show selected screen
            document.getElementById(screenName + '-screen').classList.remove('hidden');
            
            // Update navigation
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-primary', 'text-white');
                btn.classList.add('text-gray-700', 'hover:text-primary');
            });
            
            event.target.classList.add('bg-primary', 'text-white');
            event.target.classList.remove('text-gray-700', 'hover:text-primary');
            
            currentScreen = screenName;
            
            // Initialize screen-specific content
            if (screenName === 'investor') {
                initializeCharts();
            }
        }

        // Theme Toggle
        function toggleTheme() {
            isDarkMode = !isDarkMode;
            const themeIcon = document.getElementById('theme-icon');
            
            if (isDarkMode) {
                document.body.classList.add('dark');
                themeIcon.textContent = '‚òÄÔ∏è';
            } else {
                document.body.classList.remove('dark');
                themeIcon.textContent = 'üåô';
            }
        }

        // Design Simulation Functions
        function updateSimulation() {
            const greenBalconies = document.getElementById('green-balconies').checked;
            const elevatedFloor = document.getElementById('elevated-floor').checked;
            const rooftopGardens = document.getElementById('rooftop-gardens').checked;
            const bridges = document.getElementById('bridges').checked;
            const buildingHeight = document.getElementById('building-height').value;
            
            // Update height display
            document.getElementById('height-value').textContent = buildingHeight + ' floors';
            
            // Update 3D building
            const buildingBase = document.getElementById('building-base');
            buildingBase.style.height = (buildingHeight * 15) + 'px';
            
            // Show/hide features
            document.getElementById('balconies').classList.toggle('hidden', !greenBalconies);
            document.getElementById('rooftop').classList.toggle('hidden', !rooftopGardens);
            document.getElementById('elevated-ground').classList.toggle('hidden', !elevatedFloor);
            
            // Calculate impact scores
            let airQuality = 0;
            let walkability = 6.2;
            let carbon = 0;
            let noise = 0;
            let emotionalImpact = "Standard urban design with minimal biophilic elements.";
            
            if (greenBalconies) {
                airQuality += 12;
                carbon += 15;
                emotionalImpact = "Green balconies create a more natural, calming environment for residents.";
            }
            
            if (elevatedFloor) {
                walkability += 1.5;
                noise += 3;
                emotionalImpact += " Elevated ground floors provide community gathering spaces.";
            }
            
            if (rooftopGardens) {
                airQuality += 8;
                carbon += 10;
                emotionalImpact += " Rooftop gardens offer peaceful retreats and improve mental wellbeing.";
            }
            
            if (bridges) {
                walkability += 0.8;
                emotionalImpact += " Inter-building connections create a sense of community and ease of movement.";
            }
            
            // Update displays
            document.getElementById('air-quality').textContent = '+' + Math.round(airQuality) + '%';
            document.getElementById('air-quality-bar').style.width = Math.min(airQuality * 2, 100) + '%';
            
            document.getElementById('walkability').textContent = walkability.toFixed(1) + '/10';
            document.getElementById('walkability-bar').style.width = (walkability * 10) + '%';
            
            document.getElementById('carbon').textContent = '-' + Math.round(carbon) + '%';
            document.getElementById('carbon-bar').style.width = Math.min(carbon * 2, 100) + '%';
            
            document.getElementById('noise').textContent = '-' + Math.round(noise) + 'dB';
            document.getElementById('noise-bar').style.width = Math.min(noise * 5, 100) + '%';
            
            document.getElementById('emotional-impact').textContent = emotionalImpact;
        }

        function resetSimulation() {
            document.getElementById('green-balconies').checked = false;
            document.getElementById('elevated-floor').checked = false;
            document.getElementById('rooftop-gardens').checked = false;
            document.getElementById('bridges').checked = false;
            document.getElementById('building-height').value = 8;
            updateSimulation();
        }

        // Investment Calculator
        function updateCalculator() {
            const size = document.getElementById('project-size').value;
            const greenLevel = document.getElementById('green-level').value;
            const market = document.getElementById('target-market').value;
            
            document.getElementById('size-value').textContent = parseInt(size).toLocaleString();
            
            // Calculate based on inputs
            let baseInvestment = size * 120; // $120 per sq ft
            let roi = 18;
            let revenue = size * 160;
            let savings = size * 20;
            
            // Adjust for green level
            if (greenLevel === 'standard') {
                baseInvestment *= 1.25;
                roi = 31;
                revenue *= 1.3;
                savings *= 1.6;
            } else if (greenLevel === 'premium') {
                baseInvestment *= 1.4;
                roi = 42;
                revenue *= 1.5;
                savings *= 2.1;
            }
            
            // Adjust for market
            if (market === 'commercial') {
                revenue *= 1.2;
                roi += 5;
            } else if (market === 'mixed') {
                revenue *= 1.1;
                roi += 3;
            }
            
            // Update displays
            document.getElementById('calc-investment').textContent = '$' + (baseInvestment / 1000000).toFixed(1) + 'M';
            document.getElementById('calc-roi').textContent = roi + '%';
            document.getElementById('calc-revenue').textContent = '$' + (revenue / 1000000).toFixed(1) + 'M';
            document.getElementById('calc-savings').textContent = '$' + (savings / 1000).toFixed(0) + 'K';
        }

        // Chart Initialization
        function initializeCharts() {
            const ctx = document.getElementById('demandChart');
            if (ctx && !ctx.chart) {
                ctx.chart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['2020', '2021', '2022', '2023', '2024'],
                        datasets: [{
                            label: 'Green Space Demand',
                            data: [45, 52, 61, 68, 78],
                            borderColor: '#059669',
                            backgroundColor: 'rgba(5, 150, 105, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'Walkable Design Demand',
                            data: [38, 48, 58, 72, 85],
                            borderColor: '#1e40af',
                            backgroundColor: 'rgba(30, 64, 175, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }
        }

        // Map Functions
        function showMapPopup(title, content) {
            document.getElementById('popup-title').textContent = title;
            document.getElementById('popup-content').textContent = content;
            document.getElementById('map-popup').classList.remove('hidden');
            document.getElementById('map-popup').classList.add('flex');
        }

        function closeMapPopup() {
            document.getElementById('map-popup').classList.add('hidden');
            document.getElementById('map-popup').classList.remove('flex');
        }

        // Building Comments System
        let currentBuilding = null;
        let buildingComments = {
            'yaya-centre': [
                {
                    id: 1,
                    type: 'negative',
                    author: 'Sarah M.',
                    anonymous: false,
                    rating: 2,
                    text: 'The parking situation is terrible. Cars block pedestrian walkways making it dangerous to walk around the building.',
                    timestamp: '2 hours ago',
                    helpful: 8
                },
                {
                    id: 2,
                    type: 'suggestion',
                    author: 'Anonymous',
                    anonymous: true,
                    rating: 3,
                    text: 'Would love to see more green spaces around the building. Maybe some rooftop gardens or vertical gardens on the walls?',
                    timestamp: '1 day ago',
                    helpful: 12
                },
                {
                    id: 3,
                    type: 'positive',
                    author: 'James K.',
                    anonymous: false,
                    rating: 4,
                    text: 'Great shopping center with good variety of stores. The air conditioning works well and it\'s clean inside.',
                    timestamp: '3 days ago',
                    helpful: 5
                }
            ],
            'lenana-towers': [
                {
                    id: 4,
                    type: 'positive',
                    author: 'Grace W.',
                    anonymous: false,
                    rating: 5,
                    text: 'Love the modern design and the fact that they included some green balconies. It makes the building look more alive!',
                    timestamp: '1 hour ago',
                    helpful: 15
                },
                {
                    id: 5,
                    type: 'accessibility',
                    author: 'Peter N.',
                    anonymous: false,
                    rating: 3,
                    text: 'The ramps are good but the elevator is often broken. Need better maintenance for accessibility.',
                    timestamp: '5 hours ago',
                    helpful: 7
                }
            ],
            'ngong-plaza': [
                {
                    id: 6,
                    type: 'environment',
                    author: 'Mary L.',
                    anonymous: false,
                    rating: 2,
                    text: 'The building generates a lot of noise and the exhaust from the parking garage affects air quality in the area.',
                    timestamp: '6 hours ago',
                    helpful: 9
                }
            ],
            'green-apartments': [
                {
                    id: 7,
                    type: 'positive',
                    author: 'David O.',
                    anonymous: false,
                    rating: 5,
                    text: 'This is how all residential buildings should be! The green spaces, natural lighting, and community areas make it feel like home.',
                    timestamp: '30 minutes ago',
                    helpful: 23
                },
                {
                    id: 8,
                    type: 'suggestion',
                    author: 'Anonymous',
                    anonymous: true,
                    rating: 4,
                    text: 'Could use more bicycle parking and maybe a small playground for kids in the courtyard.',
                    timestamp: '2 days ago',
                    helpful: 11
                }
            ],
            'argwings-office': [
                {
                    id: 9,
                    type: 'negative',
                    author: 'Linda A.',
                    anonymous: false,
                    rating: 2,
                    text: 'The building blocks natural light to surrounding areas and creates wind tunnels that make walking uncomfortable.',
                    timestamp: '4 hours ago',
                    helpful: 16
                },
                {
                    id: 10,
                    type: 'safety',
                    author: 'John M.',
                    anonymous: false,
                    rating: 2,
                    text: 'Poor lighting around the building at night makes it feel unsafe. Need better street lighting and security.',
                    timestamp: '1 day ago',
                    helpful: 14
                }
            ],
            'kindaruma-heights': [
                {
                    id: 11,
                    type: 'suggestion',
                    author: 'Anonymous',
                    anonymous: true,
                    rating: 0,
                    text: 'Since this is still under construction, please consider adding more green features and ensuring good pedestrian access.',
                    timestamp: '3 days ago',
                    helpful: 8
                }
            ]
        };

        let buildingInfo = {
            'yaya-centre': {
                name: 'Yaya Centre',
                type: 'Commercial Shopping Complex',
                description: 'Major shopping and office complex in Kilimani'
            },
            'lenana-towers': {
                name: 'Lenana Towers',
                type: 'Mixed-Use Development',
                description: 'Modern residential and commercial tower'
            },
            'ngong-plaza': {
                name: 'Ngong Road Plaza',
                type: 'Commercial Plaza',
                description: 'Shopping and business plaza on Ngong Road'
            },
            'green-apartments': {
                name: 'Green Apartments',
                type: 'Sustainable Residential Complex',
                description: 'Eco-friendly residential building with green features'
            },
            'argwings-office': {
                name: 'Argwings Office Complex',
                type: 'Office Building',
                description: 'High-rise office building on Argwings Kodhek Road'
            },
            'kindaruma-heights': {
                name: 'Kindaruma Heights',
                type: 'Under Construction',
                description: 'New mixed-use development under construction'
            }
        };

        function showBuildingComments(buildingName, buildingId) {
            currentBuilding = buildingId;
            const building = buildingInfo[buildingId];
            const comments = buildingComments[buildingId] || [];
            
            // Update modal header
            document.getElementById('building-name').textContent = building.name;
            document.getElementById('building-type').textContent = building.type;
            document.getElementById('comment-count').textContent = `${comments.length} comments`;
            
            // Populate comments
            populateComments(comments);
            
            // Show modal
            document.getElementById('building-comments-modal').classList.remove('hidden');
            document.getElementById('building-comments-modal').classList.add('flex');
            
            // Reset form
            resetCommentForm();
        }

        function populateComments(comments) {
            const commentsList = document.getElementById('comments-list');
            
            if (comments.length === 0) {
                commentsList.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <div class="text-4xl mb-2">üí¨</div>
                        <div class="font-medium">No comments yet</div>
                        <div class="text-sm">Be the first to share your thoughts!</div>
                    </div>
                `;
                return;
            }
            
            commentsList.innerHTML = comments.map(comment => {
                const typeIcons = {
                    positive: 'üëç',
                    negative: '‚ö†Ô∏è',
                    suggestion: 'üí°',
                    accessibility: '‚ôø',
                    environment: 'üå±',
                    safety: 'üõ°Ô∏è'
                };
                
                const typeColors = {
                    positive: 'bg-green-50 border-green-200',
                    negative: 'bg-red-50 border-red-200',
                    suggestion: 'bg-blue-50 border-blue-200',
                    accessibility: 'bg-purple-50 border-purple-200',
                    environment: 'bg-green-50 border-green-200',
                    safety: 'bg-orange-50 border-orange-200'
                };
                
                const stars = comment.rating > 0 ? '‚≠ê'.repeat(comment.rating) : '';
                
                return `
                    <div class="border rounded-lg p-4 ${typeColors[comment.type] || 'bg-gray-50 border-gray-200'}">
                        <div class="flex justify-between items-start mb-2">
                            <div class="flex items-center space-x-2">
                                <span class="text-lg">${typeIcons[comment.type] || 'üí¨'}</span>
                                <span class="font-medium text-gray-900">${comment.author}</span>
                                ${stars ? `<span class="text-sm">${stars}</span>` : ''}
                            </div>
                            <span class="text-xs text-gray-500">${comment.timestamp}</span>
                        </div>
                        <p class="text-gray-700 text-sm mb-3">${comment.text}</p>
                        <div class="flex justify-between items-center">
                            <span class="text-xs text-gray-500 capitalize">${comment.type.replace('-', ' ')}</span>
                            <div class="flex items-center space-x-2">
                                <button class="text-xs text-gray-500 hover:text-primary transition-colors">
                                    üëç Helpful (${comment.helpful})
                                </button>
                                <button class="text-xs text-gray-500 hover:text-red-500 transition-colors">
                                    Report
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function closeBuildingComments() {
            document.getElementById('building-comments-modal').classList.add('hidden');
            document.getElementById('building-comments-modal').classList.remove('flex');
            currentBuilding = null;
        }

        function submitComment(event) {
            event.preventDefault();
            
            const type = document.getElementById('comment-type').value;
            const text = document.getElementById('comment-text').value;
            const rating = parseInt(document.getElementById('rating-value').value);
            const anonymous = document.getElementById('anonymous').checked;
            
            if (!currentBuilding || !type || !text.trim()) {
                showErrorMessage('Please fill in all required fields.');
                return;
            }
            
            // Create new comment
            const newComment = {
                id: Date.now(),
                type: type,
                author: anonymous ? 'Anonymous' : currentUser.name,
                anonymous: anonymous,
                rating: rating,
                text: text.trim(),
                timestamp: 'Just now',
                helpful: 0
            };
            
            // Add to comments array
            if (!buildingComments[currentBuilding]) {
                buildingComments[currentBuilding] = [];
            }
            buildingComments[currentBuilding].unshift(newComment);
            
            // Update comment count on map
            const buildingElement = document.querySelector(`[onclick*="${currentBuilding}"]`);
            if (buildingElement) {
                const countElement = buildingElement.querySelector('.bg-red-500, .bg-secondary, .bg-yellow-500, .bg-green-500, .bg-orange-500, .bg-blue-500');
                if (countElement) {
                    const currentCount = parseInt(countElement.textContent);
                    countElement.textContent = currentCount + 1;
                }
            }
            
            // Refresh comments display
            populateComments(buildingComments[currentBuilding]);
            document.getElementById('comment-count').textContent = `${buildingComments[currentBuilding].length} comments`;
            
            // Reset form
            resetCommentForm();
            
            // Show success message
            showSuccessMessage('Thank you! Your comment has been submitted and will help improve our community.');
        }

        function resetCommentForm() {
            document.getElementById('comment-type').value = '';
            document.getElementById('comment-text').value = '';
            document.getElementById('rating-value').value = '0';
            document.getElementById('anonymous').checked = false;
            document.getElementById('char-count').textContent = '0';
            
            // Reset star rating display
            document.querySelectorAll('#rating-stars .star').forEach(star => {
                star.classList.remove('text-yellow-400');
                star.classList.add('text-gray-300');
            });
        }

        function setRating(rating) {
            document.getElementById('rating-value').value = rating;
            
            // Update star display
            document.querySelectorAll('#rating-stars .star').forEach((star, index) => {
                if (index < rating) {
                    star.classList.remove('text-gray-300');
                    star.classList.add('text-yellow-400');
                } else {
                    star.classList.remove('text-yellow-400');
                    star.classList.add('text-gray-300');
                }
            });
        }

        function filterComments() {
            const filter = document.getElementById('comment-filter').value;
            const comments = buildingComments[currentBuilding] || [];
            
            let filteredComments = comments;
            if (filter !== 'all') {
                filteredComments = comments.filter(comment => comment.type === filter);
            }
            
            populateComments(filteredComments);
        }

        function toggleMapMode(mode) {
            const viewBtn = document.getElementById('view-mode-btn');
            const addBtn = document.getElementById('add-mode-btn');
            
            if (mode === 'view') {
                viewBtn.classList.add('bg-primary', 'text-white');
                viewBtn.classList.remove('bg-gray-200', 'text-gray-700');
                addBtn.classList.add('bg-gray-200', 'text-gray-700');
                addBtn.classList.remove('bg-primary', 'text-white');
            } else {
                addBtn.classList.add('bg-primary', 'text-white');
                addBtn.classList.remove('bg-gray-200', 'text-gray-700');
                viewBtn.classList.add('bg-gray-200', 'text-gray-700');
                viewBtn.classList.remove('bg-primary', 'text-white');
            }
        }

        // Character counter for comment textarea
        document.addEventListener('DOMContentLoaded', function() {
            const commentText = document.getElementById('comment-text');
            const charCount = document.getElementById('char-count');
            
            if (commentText && charCount) {
                commentText.addEventListener('input', function() {
                    const count = this.value.length;
                    charCount.textContent = count;
                    
                    if (count > 500) {
                        charCount.classList.add('text-red-500');
                        this.value = this.value.substring(0, 500);
                        charCount.textContent = '500';
                    } else {
                        charCount.classList.remove('text-red-500');
                    }
                });
            }
        });

        // Feedback Functions
        function showComplaintDetails(location, count) {
            alert(`${location}: ${count} complaints\n\nMost common issues:\n‚Ä¢ Blocked sidewalks\n‚Ä¢ Noise pollution\n‚Ä¢ Poor walkability\n‚Ä¢ Traffic congestion`);
        }

        // Admin Functions
        function uploadPlan() {
            alert('Demo: File upload dialog would open here for development plans (PDF, CAD, etc.)');
        }

        function exportZoning() {
            alert('Demo: Exporting zoning recommendations as PDF report...');
        }

        function runSimulation() {
            alert('Demo: Running traffic flow simulation with current development plans...');
        }

        function reviewComplaints() {
            showScreen('feedback');
        }

        function updateZoning() {
            alert('Demo: Updating zoning maps with new recommendations...');
        }

        // General Functions
        function generateReport() {
            alert('Demo: Generating comprehensive impact and sustainability report...');
        }

        function generateInvestorReport() {
            alert('Demo: Generating investment proposal PDF with ROI projections, market analysis, and sustainability metrics...');
        }

        function selectScenario(scenario) {
            alert(`Demo: Selected ${scenario} investment scenario. Detailed analysis would be shown here.`);
        }

        // Authentication Functions
        let isLoggedIn = true; // Demo: Start logged in
        let currentUser = {
            name: 'John Doe',
            email: 'john.doe@nairobi.gov.ke',
            role: 'Urban Planner',
            organization: 'Nairobi City Planning Department',
            avatar: 'JD'
        };

        function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const loginBtn = document.getElementById('login-btn');
            
            // Show loading state
            loginBtn.classList.add('btn-loading');
            loginBtn.disabled = true;
            
            // Simulate API call delay
            setTimeout(() => {
                // Demo: Accept any credentials
                if (email && password) {
                    isLoggedIn = true;
                    
                    // Set user info based on email
                    if (email.includes('planner') || email.includes('nairobi')) {
                        currentUser = {
                            name: 'John Doe',
                            email: email,
                            role: 'Senior Urban Planner',
                            organization: 'Nairobi City Planning Department',
                            avatar: 'JD'
                        };
                    } else if (email.includes('investor')) {
                        currentUser = {
                            name: 'Michael Chen',
                            email: email,
                            role: 'Sustainable Development Investor',
                            organization: 'GreenInvest Capital',
                            avatar: 'MC'
                        };
                    } else {
                        currentUser = {
                            name: 'Grace Wanjiku',
                            email: email,
                            role: 'Community Representative',
                            organization: 'Kilimani Residents Association',
                            avatar: 'GW'
                        };
                    }
                    
                    updateUserInterface();
                    showScreen('landing');
                    showSuccessMessage('Welcome back! Successfully signed in.');
                } else {
                    showErrorMessage('Please enter valid credentials.');
                }
                
                // Remove loading state
                loginBtn.classList.remove('btn-loading');
                loginBtn.disabled = false;
            }, 1500);
        }

        function handleSignup(event) {
            event.preventDefault();
            const signupBtn = document.getElementById('signup-btn');
            
            // Show loading state
            signupBtn.classList.add('btn-loading');
            signupBtn.disabled = true;
            
            // Simulate API call delay
            setTimeout(() => {
                // Demo: Simulate successful signup
                isLoggedIn = true;
                updateUserInterface();
                showScreen('landing');
                showSuccessMessage('Account created successfully! Welcome to UrbanFlow.');
                
                // Remove loading state
                signupBtn.classList.remove('btn-loading');
                signupBtn.disabled = false;
            }, 2000);
        }

        function demoLogin(role) {
            isLoggedIn = true;
            
            // Update user based on role
            switch(role) {
                case 'planner':
                    currentUser = {
                        name: 'Sarah Kimani',
                        email: 'sarah.kimani@nairobi.gov.ke',
                        role: 'Senior Urban Planner',
                        organization: 'Nairobi City Planning Department',
                        avatar: 'SK'
                    };
                    break;
                case 'investor':
                    currentUser = {
                        name: 'Michael Chen',
                        email: 'michael@greeninvest.com',
                        role: 'Sustainable Development Investor',
                        organization: 'GreenInvest Capital',
                        avatar: 'MC'
                    };
                    break;
                case 'citizen':
                    currentUser = {
                        name: 'Grace Wanjiku',
                        email: 'grace.wanjiku@gmail.com',
                        role: 'Community Representative',
                        organization: 'Kilimani Residents Association',
                        avatar: 'GW'
                    };
                    break;
            }
            
            updateUserInterface();
            showScreen('landing');
            showSuccessMessage(`Welcome ${currentUser.name}! Logged in as ${currentUser.role}.`);
        }

        function handleLogout() {
            isLoggedIn = false;
            currentUser = null;
            updateUserInterface();
            showScreen('login');
            showSuccessMessage('Successfully signed out. See you next time!');
        }

        function updateUserInterface() {
            const mainNav = document.getElementById('main-nav');
            const authNav = document.getElementById('auth-nav');
            const userMenu = document.getElementById('user-menu');
            
            if (isLoggedIn && currentUser) {
                // Show main navigation and user menu
                mainNav.classList.remove('hidden');
                authNav.classList.add('hidden');
                userMenu.classList.remove('hidden');
                
                // Update user info
                document.getElementById('user-name').textContent = currentUser.name;
                document.getElementById('user-avatar').textContent = currentUser.avatar;
                
                // Update profile page
                document.getElementById('profile-name').textContent = currentUser.name;
                document.getElementById('profile-role').textContent = currentUser.role;
                document.getElementById('profile-org').textContent = currentUser.organization;
            } else {
                // Show auth navigation
                mainNav.classList.add('hidden');
                authNav.classList.remove('hidden');
                userMenu.classList.add('hidden');
            }
        }

        function toggleUserMenu() {
            const dropdown = document.getElementById('user-dropdown');
            dropdown.classList.toggle('hidden');
        }

        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            if (input.type === 'password') {
                input.type = 'text';
            } else {
                input.type = 'password';
            }
        }

        function showNotifications() {
            alert('Demo: Notifications panel would show here with:\n\n‚Ä¢ New project approvals\n‚Ä¢ Citizen feedback alerts\n‚Ä¢ System updates\n‚Ä¢ Collaboration requests');
        }

        function showHelp() {
            alert('Demo: Help & Support center would include:\n\n‚Ä¢ User guides and tutorials\n‚Ä¢ Video walkthroughs\n‚Ä¢ FAQ section\n‚Ä¢ Contact support team\n‚Ä¢ Feature request form');
        }

        function showSuccessMessage(message) {
            // Create and show success notification
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-secondary text-white px-6 py-3 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform';
            notification.innerHTML = `
                <div class="flex items-center space-x-2">
                    <span>‚úÖ</span>
                    <span>${message}</span>
                </div>
            `;
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        function showErrorMessage(message) {
            // Create and show error notification
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform';
            notification.innerHTML = `
                <div class="flex items-center space-x-2">
                    <span>‚ùå</span>
                    <span>${message}</span>
                </div>
            `;
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
            const userMenu = document.getElementById('user-menu');
            const dropdown = document.getElementById('user-dropdown');
            
            if (!userMenu.contains(event.target)) {
                dropdown.classList.add('hidden');
            }
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize calculator
            updateCalculator();
            
            // Initialize simulation
            updateSimulation();
            
            // Start with login screen
            isLoggedIn = false;
            currentUser = null;
            updateUserInterface();
            showScreen('login');
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9698131ea4a41640',t:'MTc1NDI0NzgwMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
